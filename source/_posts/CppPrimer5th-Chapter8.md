---
title: CppPrimer5th-Chapter8
mathjax: true
date: 2021-01-29 21:16:28
tags:
- C++
- 基础知识
categories: C++
---
《C++ Primer 5th》第八章中的重要知识点，从本章开始进入C++标准库方面的介绍，这一章的内容是IO库
<!-- more -->

这一章开始进入C++标准库，讲述庞大的标准库内需要熟练掌握的部分。
- IO库
- 顺序容器
- 泛型算法
- 关联容器
- 动态内存

从IO库开始

## IO对象

- 无法拷贝或者赋值，IO类也都无法按值传递
- 读写IO对象会改变状态，因此传递和返回的引用不能是const的
- 流会进入错误状态，错误后所有的IO操作都会失败
```cpp
while(cin >> word){}//...check status OK
istream.clear();// 恢复正常状态
auto state = istream.rdstate(); // 读取状态
```
### 缓冲区与刷新

输出对象具有缓冲区，为了减少直接访问硬件的次数可以多次输出到缓冲区然后统一写入硬件，写入硬件的过程叫做刷新。
>导致缓冲刷新（即，数据真正写到输出设备或文件）的原因有很多：
· 程序正常结束，作为main函数的return操作的一部分，缓冲刷新被执行。
· 缓冲区满时，需要刷新缓冲，而后新的数据才能继续写入缓冲区。
· 我们可以使用操纵符如endl（参见1.2节，第6页）来显式刷新缓冲区。
· 在每个输出操作之后，我们可以用操纵符unitbuf设置流的内部状态，来清空缓冲区。默认情况下，对cerr是设置unitbuf的，因此写到cerr的内容都是立即刷新的。
· 一个输出流可能被关联到另一个流。在这种情况下，当读写被关联的流时，关联到的流的缓冲区会被刷新。例如，默认情况下，cin和cerr都关联到cout。因此，读cin或写cerr都会导致cout的缓冲区被刷新。

## 文件的输入输出

使用fstream进行读写


