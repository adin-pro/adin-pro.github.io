---
title: 由类地址强制转换访问私有变量的方法
mathjax: true
date: 2021-02-27 20:44:03
tags:
- c++
- hack
categories: 黑客入门
---

使用取地址的方式访问私有成员

<!-- more -->

对于定义在类的私有成员变量，可以通过取对象地址的方式直接推断出私有成员变量的地址，从而修改私有成员。

```cpp
class A {

public:
	A():val(5),num(20) {};
	void GetValue() {
		std::cout << num << endl;
	}
private:
	int val;
	int num;
};

int main(int argc, char* argc){
    auto a = A();
	a.GetValue();
	*((int*)&a + 1) = 10;
	a.GetValue();
    return 0;
}

/*
output:
20
10
*/

```
数据段存储在类的开头部分，与类里面定义的顺序无关。
